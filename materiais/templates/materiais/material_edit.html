{% extends 'base.html' %}

{% block title %}Editar Material{% endblock %}

{% block content %}

<div>
    <h1 class="mb-4">Editar Material</h1>
    <form id="material-edit" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="card col-12 col-sm-12 col-md-12 col-lg-12 col-xl-7 m-auto mt-4">
            <div class="card-header fw-bold d-flex justify-content-between">Editar Material 
                <i class="fa-solid fa-circle-info" data-bs-toggle="tooltip" data-bs-placement="top" title="Não são aceitos arquivos com o nome muito extenso, caso não seja redirecionado para página de trilha, renomeie o arquivo para um nome menor"></i>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-6 mb-4">
                        <label for="{{ form.nome.id_for_label }}">Nome do Material</label>
                        {{ form.nome }}
                    </div>
                    <div class="col-sm-6 mb-4">
                        <label for="{{ form.video.id_for_label }}">Vídeo</label>
                        {{ form.video }}
                        <small>Extensões permitidas: <code>mp4</code></small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 mb-4">
                        <label for="{{ form.descricao.id_for_label }}">Descrição</label>
                        {{ form.descricao }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 mb-4">
                        <label for="{{ form.arquivo.id_for_label }}">Arquivo</label>
                        {{ form.arquivo }}
                        <small>Extensões permitidas: <code>pdf, doc, docx</code></small>
                    </div>
                    <div class="col-sm-6 mb-4">
                        <label for="{{ form.fotos.id_for_label }}">Fotos</label>
                        {{ form.fotos }}
                        <small>Extensões permitidas: <code>png, jpeg, jpg</code></small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 mb-4">
                        <label for="{{ form.video_youtube.id_for_label }}">Vídeo do Youtube</label>
                        {{ form.video_youtube }}
                    </div>
                </div>
                <div class="d-flex justify-content-end align-items-center">
                    <button id="submit-edit" class="btn btn-primary mt-4" type="submit">
                        <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                        <span id="button-text">Editar</span>
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}

{% block scripts %}
<script src="/static/js/extensoes/input_extensoes_arquivos.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.forEach(function (tooltipTriggerEl) {
            new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });

    document.getElementById('material-edit').addEventListener('submit', function() {
        var submitButton = document.getElementById('submit-edit');
        submitButton.disabled = true; // Desabilita o botão
        submitButton.querySelector('.spinner-border').classList.remove('d-none'); // Exibe o spinner
        document.getElementById('button-text').textContent = 'Editando...'; // Altera o texto
    });
</script>
{% endblock %}